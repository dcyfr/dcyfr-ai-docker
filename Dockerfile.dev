# ==============================================================================
# DCYFR AI Docker - Development Dockerfile
# ==============================================================================
# Development image with hot reload, debugging, and dev tools.
# Uses bind mounts for live code changes.
#
# Usage: docker compose -f docker-compose.yml up
# ==============================================================================

FROM node:22-alpine

LABEL maintainer="DCYFR <hello@dcyfr.ai>"
LABEL org.opencontainers.image.description="DCYFR AI Application (Development)"

WORKDIR /app

# Install system dependencies
RUN apk add --no-cache python3 make g++ curl

# Copy package files
COPY package.json package-lock.json* ./

# Install all dependencies (including devDependencies)
RUN npm ci && npm cache clean --force

# Copy source code (will be overridden by bind mount in docker-compose)
COPY . .

# Expose port and debug port
EXPOSE ${PORT:-3000}
EXPOSE 9229

# Set development environment
ENV NODE_ENV=development

# Start with hot reload
CMD ["npm", "run", "dev"]
